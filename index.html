<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>The Game – Neon AI Edition</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;600;700;800&display=swap" rel="stylesheet">

  <!-- Firebase (compat) -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

  <link rel="stylesheet" href="./the-game/assets/css/styles.css">
</head>

<body>
  <div class="container">
    <div class="header">
      <h1>The Game</h1>
    </div>

    <div class="setup">
      <div class="group">
        <span class="badge" id="mode-badge">Mode : solo</span>
        <span class="badge" id="room-info"></span>
        <span class="badge" id="turn-badge"></span>
      </div>

      <div class="group">
        <input id="name-input" type="text" maxlength="12" placeholder="Pseudo" />
        <button id="btn-save-name" class="btn">OK</button>
      </div>

      <div class="group">
        <button id="btn-solo" class="btn">Solo</button>
        <button id="btn-create-online" class="btn">Créer</button>
        <input id="join-code-input" type="text" maxlength="6" placeholder="CODE" style="width:80px; text-transform:uppercase;" />
        <button id="btn-join-online" class="btn">Rejoindre</button>
      </div>
    </div>

    <div class="statusline">
      <div id="info" class="info"></div>
      <div id="status" class="status"></div>
    </div>

    <!-- Multi: players panel -->
    <div class="boardWrap" id="playersWrap" style="display:none;">
      <div class="boardTitleRow">
        <div class="boardTitle">Joueurs</div>
      </div>
      <div id="playersList" class="players"></div>
    </div>

    <div class="boardWrap">
      <div class="boardTitleRow">
        <div class="boardTitle">Plateau</div>
      </div>

      <div class="board">
        <div class="pile-row">
          <div class="base-card">100<div class="base-dir">↓</div></div>
          <button class="pile-card card" id="pile-0"></button>
        </div>
        <div class="pile-row">
          <div class="base-card">100<div class="base-dir">↓</div></div>
          <button class="pile-card card" id="pile-1"></button>
        </div>
        <div class="pile-row">
          <div class="base-card">1<div class="base-dir">↑</div></div>
          <button class="pile-card card" id="pile-2"></button>
        </div>
        <div class="pile-row">
          <div class="base-card">1<div class="base-dir">↑</div></div>
          <button class="pile-card card" id="pile-3"></button>
        </div>
      </div>

      <div class="controls">
        <button id="new-game" class="btn btn-danger">Reset</button>
        <button id="btn-ai-hint" class="btn btn-ai">✨ Conseil IA</button>
        <button id="end-turn" class="btn btn-primary">Finir tour</button>
      </div>
    </div>

    <div class="handWrap">
      <div class="handTitleRow">
        <div class="hand-title">Ta main</div>
      </div>
      <div id="hand" class="hand"></div>
    </div>
  </div>

  <!-- Win Modal -->
  <div id="end-overlay" class="overlay">
    <div class="modal">
      <h2>Partie Terminée</h2>
      <p>Score final :</p>
      <div class="statGrid">
        <div class="stat"><div class="k">Deck</div><div class="v" id="end-deck">0</div></div>
        <div class="stat"><div class="k">Total Restant</div><div class="v" id="end-total">0</div></div>
      </div>
      <div class="row">
        <button id="btn-video" class="btn">Récompense</button>
        <button id="btn-close-end" class="btn">Fermer</button>
        <button id="btn-replay" class="btn btn-primary">Rejouer</button>
      </div>
    </div>
  </div>

  <!-- Lose Modal -->
  <div id="lose-overlay" class="overlay">
    <div class="modal">
      <h2>Partie Perdue</h2>
      <p id="lose-reason">Plus aucun coup possible.</p>
      <div class="statGrid">
        <div class="stat"><div class="k">Deck</div><div class="v" id="lose-deck">0</div></div>
        <div class="stat"><div class="k">Total Restant</div><div class="v" id="lose-total">0</div></div>
      </div>
      <div class="row">
        <button id="btn-close-lose" class="btn">Fermer</button>
        <button id="btn-replay-lose" class="btn btn-primary">Rejouer</button>
      </div>
    </div>
  </div>

  <!-- AI Modal -->
  <div id="ai-overlay" class="overlay">
    <div class="modal">
      <h2>Conseiller Tactique</h2>
      <div id="ai-content">Analyse du plateau en cours...</div>
      <div class="row">
        <button id="btn-close-ai" class="btn btn-primary">Merci</button>
      </div>
    </div>
  </div>

  <script type="module" src="./assets/js/app.js"></script>
</body>
</html>

